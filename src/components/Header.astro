---
const navigation = [
  { name: 'Hem', href: '/', description: 'Startsida' },
  { name: 'Tjänster', href: '/tjanster', description: 'Våra eltjänster' },
  { name: 'Områden', href: '/omraden', description: 'Våra serviceområden' },
  { name: 'Om oss', href: '/om-oss', description: 'Om Elektriker Södertälje' },
  { name: 'Kontakt', href: '/kontakt', description: 'Kontakta oss' },
];

const currentPath = Astro.url.pathname;
---

<header class="relative z-50" role="banner">
  <!-- Top bar -->
  <div class="bg-primary-900 text-white">
    <div class="container py-2">
      <div class="flex items-center justify-between text-sm">
        <div class="flex items-center space-x-4">
          <a href="tel:08-123 456 78" class="flex items-center hover:text-primary-200 transition-colors" aria-label="Ring vår jourtelefon">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
            <span>08-123 456 78</span>
          </a>
          <span class="hidden sm:inline" aria-hidden="true">|</span>
          <a href="mailto:info@elektriker-södertälje.se" class="hidden sm:flex items-center hover:text-primary-200 transition-colors" aria-label="Skicka e-post">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
            <span>info@elektriker-södertälje.se</span>
          </a>
        </div>
        <div class="flex items-center space-x-4">
          <span>Mån-Fre: 07:00-16:00</span>
          <span class="hidden sm:inline" aria-hidden="true">|</span>
          <span class="hidden sm:inline text-primary-300">Jour: 24/7</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main navigation -->
  <nav class="bg-white border-b border-gray-100" aria-label="Huvudmeny">
    <div class="container">
      <div class="flex items-center justify-between py-4">
        <!-- Logo -->
        <a href="/" class="flex items-center space-x-2" aria-label="Elektriker Södertälje - Gå till startsidan">
          <svg class="w-8 h-8 text-primary-600" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M12 3v2m0 14v2M5.636 5.636l1.414 1.414m9.9 9.9l1.414 1.414M3 12h2m14 0h2M5.636 18.364l1.414-1.414m9.9-9.9l1.414-1.414M12 7a5 5 0 015 5 5 5 0 01-5 5 5 5 0 01-5-5 5 5 0 015-5z" />
          </svg>
          <span class="text-xl font-bold text-gray-900">Elektriker Södertälje</span>
        </a>

        <!-- Desktop navigation -->
        <div class="hidden md:flex items-center space-x-1">
          {navigation.map(item => (
            <a
              href={item.href}
              class:list={[
                'px-3 py-2 rounded-md text-sm font-medium transition-colors',
                currentPath === item.href
                  ? 'bg-primary-50 text-primary-700'
                  : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'
              ]}
              aria-current={currentPath === item.href ? 'page' : undefined}
              aria-label={item.description}
            >
              {item.name}
            </a>
          ))}
          <a
            href="/kontakt#contact"
            class="ml-4 inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200"
            aria-label="Få kostnadsfri offert"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
              <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
            </svg>
            Få offert
          </a>
        </div>

        <!-- Mobile menu button -->
        <button
          type="button"
          class="md:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"
          aria-expanded="false"
          aria-controls="mobile-menu"
          aria-label="Öppna meny"
        >
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile menu -->
  <div class="hidden md:hidden" id="mobile-menu" role="navigation" aria-label="Mobilmeny">
    <div class="container py-3">
      <div class="space-y-1">
        {navigation.map(item => (
          <a
            href={item.href}
            class:list={[
              'block px-3 py-2 rounded-md text-base font-medium',
              currentPath === item.href
                ? 'bg-primary-50 text-primary-700'
                : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'
            ]}
            aria-current={currentPath === item.href ? 'page' : undefined}
            aria-label={item.description}
          >
            {item.name}
          </a>
        ))}
        <a
          href="/kontakt#contact"
          class="block w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200 mt-4"
          aria-label="Få kostnadsfri offert"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
          </svg>
          Få offert
        </a>
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  const menuButton = document.querySelector('button[aria-expanded]');
  const menu = document.querySelector('#mobile-menu');

  menuButton?.addEventListener('click', () => {
    const isExpanded = menuButton.getAttribute('aria-expanded') === 'true';
    menuButton.setAttribute('aria-expanded', String(!isExpanded));
    menu?.classList.toggle('hidden');
  });
</script>